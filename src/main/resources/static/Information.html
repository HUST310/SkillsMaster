<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <!-- import CSS -->
  <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
  <style>
    .el-header {
      background-color: #B3C0D1;
      color: #333;
      line-height: 60px;
    }

    .el-aside {
      color: #333;
    }
    #ChangeList{
      margin-left: 5%;
      width: 30%;
      height: 50%;
    }

    #title{
      left: 20px;
      position: relative;
      font-size: 20px;
    }
    .input{
      max-width: 300px ;

    }

    #changeAvatar {
      width: 100px;
      margin-top: 3%;
      margin-left: 7%;
      position: absolute;
    }

    .avatar-uploader {
      border: 1px dashed #d9d9d9;
      border-radius: 6px;
      cursor: pointer;
      width: 100px;
      height: 100px;

    }
    .avatar-uploader:hover {
      border-color: #409EFF;
    }
    .avatar-uploader-icon {
      font-size: 28px;
      color: #8c939d;
      width: 100px;
      height: 100px;

      text-align: center;
      padding-top: 40px;
    }

    .avatar {
      width: 100px;
      height: 100px;
      display: block;
    }
  </style>
</head>
<body>
<div id="app">
<!--  <script src="js/vue.js"></script>
  <script src="element-ui/lib/index.js"></script>
  <script src="js/axios-0.18.0.js"></script>-->
  <el-container style="height: 730px; border: 1px solid #eee">
    <el-aside width="200px" style="background-color: rgb(238, 241, 246)">
      <el-menu :default-openeds="['1', '3']">
        <i class="el-icon-edit" style="height: 50px;font-size: 1.2em;position: relative;
                   top: 15px;"> My blog </i>
        <div style="border:1px solid #CCC"></div>
        <i class="el-icon-user-solid"
           style="height: 50px;
                   font-size: 1.2em;
                   position: relative;
                   top: 15px;">     姜明 </i>
        <div style="border:1px solid #CCC"></div>
        <el-menu-item index="1">
          <i class="el-icon-pie-chart"></i>
          <span slot="title">数据展示</span>
        </el-menu-item>
        <el-menu-item index="2">
          <i class="el-icon-magic-stick"></i>
          <span slot="title">发布博客</span>
        </el-menu-item>
        <br />
        <div>管理模块</div>
        <el-menu-item index="3">
          <i class="el-icon-s-management"></i>
          <span slot="title"> <el-link href="./BlogManage.html">博客管理</el-link></span>
        </el-menu-item>
        <el-menu-item index="4">
          <i class="el-icon-price-tag"></i>
          <span slot="title"><el-link href="./Label.html">标签管理</el-link></span>
        </el-menu-item>
        <el-menu-item index="5">
          <i class="el-icon-s-comment"></i>
          <span slot="title"><el-link href="./Comments.html">评论管理</el-link></span>
        </el-menu-item>
        <el-menu-item index="6">
          <i class="el-icon-star-on"></i>
          <span slot="title"><el-link href="./Follow.html">关注管理</el-link></span>
        </el-menu-item>
        <br />
        <div>个人模块</div>
        <el-menu-item index="7">
          <i class="el-icon-user"></i>
          <span slot="title">个人信息</span>
        </el-menu-item>
        <el-menu-item index="8">
          <i class="el-icon-lock"></i>
          <span slot="title">修改密码</span>
        </el-menu-item>
        <el-menu-item index="9">
          <i class="el-icon-error"></i>
          <span slot="title">退出登录</span>
        </el-menu-item>
      </el-menu>
    </el-aside>

    <el-container>
      <el-header style="text-align: right; font-size: 12px">
        <el-dropdown>
          <i class="el-icon-setting" style="margin-right: 15px"></i>
        </el-dropdown>
        <span>博客</span>
      </el-header>
      <el-divider></el-divider>
      <div style="border-style: double;border-width: thick;">
        <br />
        <el-form ref="form" :model="sizeForm" label-width="80px" size="mini" id="ChangeList" style="float: left">
          <el-row >
            <div id="title" class="demonstration" style="float: left">基本资料</div>
          </el-row>
          <hr>
<div style="position: relative;
     left: 150px;">

          <el-form-item label="昵称">
            <el-input class="input"   v-model="sizeForm.name"></el-input>
          </el-form-item>
          <el-form-item label="个人简介">
            <el-input class="input" type="textarea"  v-model="sizeForm.signature"></el-input>
          </el-form-item>
          <el-form-item label="性别">
            <el-select v-model="sizeForm.region" placeholder="请选择性别">
              <el-option label="男" value="男"></el-option>
              <el-option label="女" value="女"></el-option>
            </el-select>
          </el-form-item>
</div>
          <el-form-item>
            <el-button type="primary" size="middle" @click="onSubmit">提交</el-button>
          </el-form-item>

        </el-form>
        <div id="changeAvatar">
          <el-upload
                  class="avatar-uploader"
                  action="#"
                  :auto-upload="false"
                  :show-file-list="false"
                  :on-change="change"
                  :before-upload="beforeAvatarUpload">
            <img v-if="sizeForm.imageUrl" :src="sizeForm.imageUrl" class="avatar">
            <i v-else class="el-icon-plus avatar-uploader-icon"></i>

          </el-upload>

        </div>
      </div>
    </el-container>
  </el-container>
</div>
</body>
<!-- import Vue before Element -->
<script src="https://unpkg.com/vue@2/dist/vue.js"></script>
<!-- import JavaScript -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>

<script>
  new Vue({
    el: '#app',
    mounted(){

      axios({
        method:"get",
        url:"/Info/getInfo"
      }).then(resp=>{
        this.sizeForm=resp.data;
      })
    },
    data() {
      return {
        sizeForm: {
        },
        avatar:''
      }
    },
    methods: {
      onSubmit() {
        let form = new FormData();
        form.append("name", this.sizeForm.name);
        form.append("name", this.sizeForm.signature);
        form.append("region", this.sizeForm.region);

        axios({
          method: "post",
          url: "/Info/modifyInfo",
          data: form
        }).then(resp => {
          this.$message({
            message: '修改成功！',
            type: 'success'
          });
        })
      },
      change(file) {
        this.sizeForm.imageUrl = URL.createObjectURL(file.raw);
        this.avatar = file.raw;

      },

      beforeAvatarUpload(file) {
        const isJPGOrONG = (file.type === 'image/jpeg') || (file.type === 'image/png');
        const isLt2M = file.size / 1024 / 1024 < 2;

        if (!isJPGOrONG) {
          this.$message.error('上传头像图片只能是 JPG 或 PNG 格式!');
        }
        if (!isLt2M) {
          this.$message.error('上传头像图片大小不能超过 2MB!');
        }
        return isJPGOrONG && isLt2M;
      }
    }
  })
</script>
</html>